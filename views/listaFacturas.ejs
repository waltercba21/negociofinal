<%- include ./layouts/head.ejs %>
<%- include ./layouts/header.ejs %>
<body>
    <main class="container-listadoPresupuesto">
        <h2 class="titulo-listado">Listado de Facturas</h2>
        <label for="fechaInicio">Desde:</label>
        <input type="date" id="fechaInicio" value="<%= new Date().toISOString().split('T')[0] %>">
        <label for="fechaFin">Hasta:</label>
        <input type="date" id="fechaFin" value="<%= new Date().toISOString().split('T')[0] %>">
        <button id="buscar">Buscar</button>
        <button id="btnImprimirTotal" class="btn btn-secondary">Imprimir Total</button> 

        <table id="facturas-table" class="table-presupuestos">
            <thead class="thead-presupuestos">
                <tr>
                    <th>ID Factura</th>
                    <th>Fecha</th>
                    <th>Cliente</th>
                    <th>Total</th>
                    <th>Acciones</th>
                </tr>
            </thead> 
            <tbody>
                <!-- Aquí se insertarán las filas dinámicamente con JavaScript -->
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4" class="td-presupuestos"><strong>Total:</strong></td>
                    <td id="total-presupuestos" class="tfoot-total"></td>
                </tr>
            </tfoot>
        </table>
        <!-- Modal para mostrar detalles de la factura -->
<div class="modal fade" id="detalleFacturaModal" tabindex="-1" role="dialog" aria-labelledby="detalleFacturaLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="detalleFacturaLabel">Detalles de la Factura</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- Aquí se mostrarán los detalles de la factura -->
          <h6>Cliente: <span id="nombreCliente"></span></h6>
          <h6>Fecha: <span id="fechaFactura"></span></h6>
          <h6>Total: $<span id="totalFactura"></span></h6>
          <hr>
          <h6>Productos:</h6>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio Unitario</th>
                <th>Subtotal</th>
              </tr>
            </thead>
            <tbody id="productosFactura">
              <!-- Aquí se cargarán los productos de la factura -->
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
  
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <script src="/js/listaFacturas.js"></script>
</body>
