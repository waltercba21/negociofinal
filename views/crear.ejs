<%- include ./layouts/head.ejs %>
<%- include ./layouts/header.ejs %>

<body>
    <main>
<div class="container-crear"> 
    <div class="contenido-crear">

        <div class="titulo-crear">
        Crear Producto
        </div>

        <div class="card-body">
            <form method="POST" action="/productos" enctype="multipart/form-data">

                <div class="form-group-crear">
                    <label for="imagen">Imagen</label>
                    <input id="imagen" class="form-control-file" type="file" name="archivo">
                </div>
                
                <div class="form-group-crear">
                <label for="nombre">Nombre:</label>
                <input id="nombre" class="form-control" type="text" name="nombre">
                </div>

                <div class="form-group-crear">
                    <label for="codigo">Código:</label>
                    <input id="codigo" class="form-control" type="text" name="codigo">
                </div>

                <div class="form-group-crear">
                <label for="descripcion">Descripcion:</label>
                <input id="descripcion" class="form-control" type="text" name="descripcion">
                </div>
                <div class="form-group-crear">
                    <label for="oferta">Oferta:</label>
                    <input id="oferta" type="checkbox" name="oferta">
                </div>

                <div class="form-group-crear">
                    <label for="categoria">Categoria</label>
                    <select id="categoria" name="categoria">
                      <option value="" selected>Selecciona una categoría...</option>
                      <option value="FAROS TRASEROS">FAROS TRASEROS</option>
                      <option value="FAROS DELANTEROS">FAROS DELANTEROS</option>
                      <option value="OPTICAS">OPTICAS</option>
                      <option value="FAROS LED">FAROS LED</option>
                      <option value="LAMPARAS">LAMPARAS</option>
                      <option value="FAROS CAMIONES">FAROS CAMIONES</option>
                      <option value="LINEA UNIVERSAL">LINEA UNIVERSAL</option>
                    </select>
                </div>

                <div class="form-group-crear">
                    <label for="proveedor">Proveedor:</label>
                    <select id="proveedor" name="proveedor">
                      <option value="" selected>Selecciona un proveedor...</option>
                      <% proveedores.forEach(function(proveedor) { %>
                        <option value="<%= proveedor.nombre %>"><%= proveedor.nombre %></option>
                      <% }); %>
                    </select>
                  </div>

                  <div class="form-group-crear">
                    <label for="marca">Marca:</label>
                    <select id="marca" name="marca">
                      <option value="" selected>Selecciona una marca...</option>
                      <% marcas.forEach(function(marca) { %>
                        <option value="<%= marca.nombre %>"><%= marca.nombre %></option>
                      <% }); %>
                    </select>
                  </div>
                  
                  <div class="form-group-crear">
                    <label for="modelo">Modelo:</label>
                    <select id="modelo" name="modelo">
                      <option value="" selected>Selecciona un modelo...</option>
                      <!-- Los modelos se llenarán dinámicamente con JavaScript -->
                    </select>
                  </div>

                <div class="form-group-crear">
                    <label for="precio">Precio:</label>
                    <input id="precio" class="form-control" type="number" step="0.01" name="precio">
                </div>
    
                <div class="botones-crear">
                <button class="btn btn-success" type="submit">Guardar</button>
                <a class='btn btn-primary'href="/productos">Cancelar</a>
                </div>
            </form>

    </div>
    </div>
    </div>
</main>
    <%- include ./layouts/footer.ejs %>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
  $('#marca').change(function() {
    var marcaSeleccionada = $(this).val();
    $.ajax({
      url: '/modelos/' + marcaSeleccionada, // Asegúrate de tener una ruta en tu servidor que devuelva los modelos para una marca dada
      method: 'GET',
      success: function(data) {
  console.log('Data:', data);
  $('#modelo').empty();
  $('#modelo').append('<option value="" selected>Selecciona un modelo...</option>');
  data.forEach(function(modelo) {
    $('#modelo').append('<option value="' + modelo.nombre + '">' + modelo.nombre + '</option>');
  });
}
    });
  });
</script>
</body>



