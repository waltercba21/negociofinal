<%- include('./layouts/head.ejs') %>
<%- include('./layouts/header.ejs') %>

<style>
  .rp-wrap{max-width:1100px;margin:18px auto;padding:0 12px}
  .rp-card{background:#fff;border:1px solid rgba(31,72,126,.12);border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.06);padding:14px}
  .rp-title{margin:0 0 10px 0;font-weight:800;color:#1f487e}
  .rp-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;align-items:end}
  .rp-label{font-weight:700;font-size:.9rem;color:#29486f;margin-bottom:4px;display:block}
  .rp-input{width:100%;padding:.45rem .55rem;border-radius:10px;border:1px solid #dfe7f2}
  .rp-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .rp-btn{border-radius:10px;font-weight:800;padding:9px 12px;border:1px solid rgba(2,6,23,.12);background:#fff;cursor:pointer}
  .rp-btn.pdf{background:#0b6e4f;color:#fff;border-color:#0b6e4f}
  .rp-muted{color:#6b7280;font-size:.9rem;margin-top:8px}
</style>

<div class="rp-wrap">
  <div class="rp-card">
    <h3 class="rp-title">Listado para pedido al proveedor (PDF)</h3>

    <form method="GET" action="/productos/recomendacionesProveedor/pdf" target="_blank">
      <div class="rp-grid">
        <div>
          <label class="rp-label" for="proveedor_id">Proveedor</label>
          <select class="rp-input" id="proveedor_id" name="proveedor_id" required>
            <option value="">Seleccionar…</option>
            <% (proveedores || []).forEach(p => { %>
              <option value="<%= p.id %>" <%= String(filtros?.proveedor_id||'')===String(p.id) ? 'selected' : '' %>>
                <%= p.nombre %>
              </option>
            <% }) %>
          </select>
        </div>

        <div>
          <label class="rp-label" for="stock_max">Listar productos con stock ≤</label>
          <select class="rp-input" id="stock_max" name="stock_max">
            <% [1,2,3,4,5,6].forEach(n => { %>
              <option value="<%= n %>" <%= String(filtros?.stock_max||'6')===String(n) ? 'selected' : '' %>><%= n %></option>
            <% }) %>
          </select>
        </div>

        <div>
          <label class="rp-label" for="desde">Desde</label>
          <input class="rp-input" type="date" id="desde" name="desde" value="<%= filtros?.desde || '' %>">
        </div>

        <div>
          <label class="rp-label" for="hasta">Hasta</label>
          <input class="rp-input" type="date" id="hasta" name="hasta" value="<%= filtros?.hasta || '' %>">
        </div>
      </div>

      <div class="rp-actions">
        <button class="rp-btn pdf" type="submit">Generar PDF</button>
      </div>

      <div class="rp-muted">
        El PDF incluye: (1) productos con stock ≤ el valor elegido y (2) recomendados por ventas entre fechas, mostrando su stock actual.
      </div>
    </form>
  </div>
</div>

<%- include('./layouts/footer.ejs') %>
