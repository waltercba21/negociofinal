<%- include('./layouts/head.ejs') %>
<%- include('./layouts/header.ejs') %>

<%
  const msg = (typeof mensaje !== 'undefined' && mensaje) ? String(mensaje) : 'No se pudo procesar el pago.';
%>

<body>
  <main class="carrito-container">
    <h1>‚ùå Pago fallido</h1>

    <style>
      :root{
        --af-bg:#f6f8fb;
        --af-card:#ffffff;
        --af-text:#0f172a;
        --af-muted:#64748b;
        --af-border:#e5e7eb;
        --af-primary:#1d4ed8;
        --af-danger:#ef4444;
        --af-shadow: 0 12px 30px rgba(2,6,23,.08);

        --tap: 44px;
        --radius: 18px;
      }

      body{ background: var(--af-bg); }

      .carrito-container{
        max-width: 980px;
        margin: 28px auto;
        padding: 0 16px 140px;
        color: var(--af-text);
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      }

      .carrito-container h1{
        margin: 0 0 12px 0;
        font-size: 28px;
        font-weight: 900;
        display:flex;
        align-items:center;
        justify-content:center;
        gap:10px;
        text-align:center;
      }

      .wrap{
        display:flex;
        justify-content:center;
      }

      .error-card{
        width: 100%;
        max-width: 560px;
        background: var(--af-card);
        border: 1px solid rgba(239,68,68,.25);
        border-radius: var(--radius);
        padding: 18px;
        box-shadow: var(--af-shadow);
      }

      .error-top{
        display:flex;
        align-items:flex-start;
        gap: 12px;
      }

      .error-icon{
        width: 46px;
        height: 46px;
        border-radius: 16px;
        background: rgba(239,68,68,.10);
        border: 1px solid rgba(239,68,68,.20);
        color: var(--af-danger);
        display:flex;
        align-items:center;
        justify-content:center;
        flex: 0 0 auto;
        font-size: 18px;
        font-weight: 950;
      }

      .error-title{
        margin: 2px 0 6px 0;
        font-weight: 950;
        font-size: 16px;
      }

      .error-msg{
        margin: 0;
        color: var(--af-muted);
        font-weight: 850;
        line-height: 1.35;
      }

      .hint{
        margin-top: 12px;
        border: 1px solid var(--af-border);
        border-radius: 16px;
        padding: 12px;
        background: #fff;
        color: var(--af-muted);
        font-weight: 850;
      }

      .btn-row{
        margin-top: 14px;
        display:flex;
        gap: 10px;
        flex-wrap:wrap;
      }

      .btn{
        min-height: var(--tap);
        padding: 12px 16px;
        border-radius: 14px;
        font-weight: 950;
        border: none;
        cursor: pointer;
        text-decoration:none;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        gap: 10px;
        transition: transform .12s ease, filter .12s ease;
      }

      .btn-primary{
        background: var(--af-primary);
        color:#fff;
        box-shadow: 0 12px 20px rgba(29,78,216,.20);
      }
      .btn-primary:hover{ filter: brightness(1.05); transform: translateY(-1px); }
      .btn-primary:active{ transform: translateY(0); }

      .btn-ghost{
        background: transparent;
        color: var(--af-text);
        border: 1px solid var(--af-border);
      }
      .btn-ghost:hover{ background: rgba(15,23,42,.04); }

      /* Sticky CTA mobile */
      .sticky{
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 999;
        background: rgba(246,248,251,.92);
        backdrop-filter: blur(10px);
        border-top: 1px solid rgba(229,231,235,.9);
        padding: 10px 12px;
      }
      .sticky__inner{
        max-width: 980px;
        margin: 0 auto;
        display:flex;
        align-items:center;
        justify-content: space-between;
        gap: 10px;
      }
      .sticky-note{
        display:flex;
        flex-direction:column;
        gap: 2px;
      }
      .sticky-note small{ color: var(--af-muted); font-weight: 900; }
      .sticky-note strong{ font-weight: 950; }

      .mobile-only{ display:none; }
      @media (max-width: 640px){
        .carrito-container{ padding: 0 14px 160px; }
        .error-card{ padding: 14px; }
        .btn-row{ display:none; }
        .mobile-only{ display:block; }
      }
    </style>

    <div class="wrap">
      <section class="error-card">
        <div class="error-top">
          <div class="error-icon">!</div>
          <div>
            <div class="error-title">No se pudo completar el pago</div>
            <p class="error-msg"><%= msg %></p>
          </div>
        </div>

        <div class="hint">
          <div style="font-weight:950;color:var(--af-text);margin-bottom:6px;">
            Qu√© pod√©s hacer ahora
          </div>
          <div>‚Ä¢ Volver al carrito y reintentar el pago.</div>
          <div>‚Ä¢ Si usaste tarjeta, prob√° nuevamente o con otro medio.</div>
          <div>‚Ä¢ Si el problema contin√∫a, escribinos y te ayudamos.</div>
        </div>

        <div class="btn-row">
          <a href="/carrito" class="btn btn-primary">üõí Volver al carrito</a>
          <a href="/carrito/pago" class="btn btn-ghost">üí≥ Reintentar pago</a>
        </div>
      </section>
    </div>

    <div class="sticky mobile-only">
      <div class="sticky__inner">
        <div class="sticky-note">
          <small>Siguiente paso</small>
          <strong>Reintentar</strong>
        </div>
        <div style="display:flex; gap:10px;">
          <a href="/carrito" class="btn btn-primary" style="padding:12px 14px;">üõí</a>
          <a href="/carrito/pago" class="btn btn-ghost" style="padding:12px 14px;">üí≥</a>
        </div>
      </div>
    </div>

  </main>

  <%- include('./layouts/footer.ejs') %>
</body>
